{
  "status": "error",
  "raw_response": "import json\nimport re\n\ndef validate_input(data):\n    result = {\"utile\": False, \"categorie\": \"\", \"sentiment\": \"\", \"type_probleme\": \"\", \"score_gravite\": 0, \"status\": \"\"}\n    \n    for key, value in data.items():\n        if isinstance(value, str) and value.startswith(\"{\"):\n            value = json.loads(value)\n        \n        if 'utile' in value:\n            result['utile'] = value['utile']\n            \n            if not result['utile']:\n                return {}\n                \n        elif 'categorie' in value:\n            result['categorie'] = value['categorie']\n            \n        elif 'sentiment' in value:\n            result['sentiment'] = value['sentiment']\n            \n        elif 'type_probleme' in value:\n            result['type_probleme'] = value['type_probleme']\n            \n        elif 'score_gravite' in value:\n            result['score_gravite'] = value['score_gravite']\n            \n    # Gravity validation\n    if not result['utile']:\n        gravity_score = 0  # assuming no gravity when 'utile' is False\n        \n        # Validate if gravity score is near 0 (between -4 and 4)\n        if not (-4 <= gravity_score <= 4):\n            return {}\n            \n    # Tweet validation\n    tweet = result['tweet']  # Added a new key 'tweet'\n    \n    # Regular expression to check for keywords like \"coupure de fibre\" or \"#panne\"\n    if re.search(r'\\bcoupure de fibre\\b|\\#panne', tweet):\n        return {}\n        \n    # Validate sentiment\n    sentiments = [\"colere\", \"joie\", \"tristesse\"]  # Add more sentiments as needed\n    \n    for sentiment in sentiments:\n        if sentiment in result['sentiment']:\n            continue\n        else:\n            return {}\n            \n    # Status validation\n    status = ['success', 'error']\n    \n    for s in status:\n        if s == result['status'] and not (result['utile'] or result['score_gravite'] != 0):\n            continue\n        else:\n            return {}\n            \n    # Return consolidated key-value pairs\n    return {\n        \"utile\": result[\"utile\"],\n        \"categorie\": result['categorie'],\n        \"sentiment\": result['sentiment'],\n        \"type_probleme\": result['type_probleme'],\n        \"score_gravite\": result['score_gravite'],\n        \"status\": result['status']\n    }\n\n# Test the function\ndata = {\n  \"A1\": \"{\\\"useful\\\": true}\",\n  \"A2\": \"{\\\"categorie\\\": \\\"probleme\\\"}\",\n  \"A3\": \"{\\\"sentiment\\\": \\\"colere\\\"}\",\n  \"A4\": \"Bonjour !\\n\\nAnalysons le probl\\u00e8me :\\n\\nLe message indique que \\\"Un coupure de fibre\\\" a entra\\u00een\\u00e9 une interruption de service pour une partie des abonn\\u00e9s de Cergy (95). Les mots cl\\u00e9s ici sont \\\"coupure de fibre\\\" et \\\"interruption de service\\\".\\n\\nLe type de probl\\u00e8me est donc : \\\"panne\\\"\\n\\nVoici la r\\u00e9ponse JSON :\\n\\n```json\\n{\\\"type_probleme\\\": \\\"panne\\\"}\\n```\\n\\nEt voici le tweet adapt\\u00e9 :\\n\\n\\\"RT @Free_1337: Un coupure de fibre entra\\u00eene une #panne pour une partie des abonn\\u00e9s de Cergy (95). Des \\u00e9quipes sont sur place ! #serviceinterru #cergy\\\"\",\n  \"A5\": \"Pour d\\u00e9terminer le score de gravit\\u00e9, je vais consid\\u00e9rer les \\u00e9l\\u00e7ements suivants :\\n\\n* Il y a un report de travaux de r\\u00e9seau (coupure de fibre) qui affecte une partie des abonn\\u00e9s.\\n* Il n'y a pas d'indication de menace imm\\u00e9diate pour la s\\u00e9curit\\u00e9 physique des personnes.\\n\\nSur ces points, je donnerais une score de gravit\\u00e9 de -4. La situation est perturbatrice, mais ne pr\\u00e9sente pas de danger imminent pour la vie ou la s\\u00e9curit\\u00e9 humaine.\\n\\nR\\u00e9ponse JSON : {\\\"score_gravite\\\": -4}\\n\\nTweet :\\n\\\"RT @Free_1337: Un coupure de fibre entra\\u00eene une interruption de service pour une partie des abonn\\u00e9s de Cergy (95). Des \\u00e9quipes sont sur place pour r\\u00e9soudre le probl\\u00e8me. #Cergy #FibreOptique #R\\u00e9seau\\\"\"\n}\n\nresult = validate_input(data)\nprint(result)"
}