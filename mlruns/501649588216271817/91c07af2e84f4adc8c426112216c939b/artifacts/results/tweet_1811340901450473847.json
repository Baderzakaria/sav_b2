{
  "status": "error",
  "raw_response": "import json\nimport re\n\n\ndef validate_results(results):\n    utile = results[\"utile\"]\n    if not utile:\n        return {\n            \"utile\": False,\n            \"categorie\": None,\n            \"sentiment\": None,\n            \"type_probleme\": None,\n            \"score_gravite\": 0,\n            \"status\": \"success/error\",\n        }\n\n    categories = [\n        re.search(r\"probleme\", result[\"A2\"]),\n        re.search(r\"satisfaction\", result[\"A3\"]),\n        re.search(r\"abonnement\", result[\"A4\"]),\n    ]\n\n    sentiments = [\n        re.search(r\"satisfaction\", result[\"A3\"]),\n        re.search(r\"positive\", result[\"A1\"]),\n    ]\n\n    type_problems = [\n        re.search(r\"abonnement\", result[\"A4\"]),\n        re.search(r\"probleme\", result[\"A2\"]),\n    ]\n\n    scores_gravite = {\n        re.search(r\"satisfaction\", result[\"A3\"]): 5,\n        re.search(r\"positive\", result[\"A1\"]): 6,\n    }\n\n    if all(categories):\n        categorie = \"probleme\"\n\n    if any(sentiments):\n        sentiment = \"satisfaction\"\n\n    if all(type_problems):\n        type_probleme = \"abonnement\"\n    else:\n        type_probleme = None\n\n    score_gravite = 0\n    for value in scores_gravite.values():\n        if value != None:\n            score_gravite += value\n\n    return {\n        \"utile\": utile,\n        \"categorie\": categorie,\n        \"sentiment\": sentiment,\n        \"type_probleme\": type_probleme,\n        \"score_gravite\": score_gravite,\n        \"status\": \"success\",\n    }\n\n\ndef parse_json(input_str):\n    if input_str:\n        return json.loads(input_str)\n\ninput_data = {\n    \"A1\": \"JSON Response:\\n{\\\"useful\\\": false}\\n\\nReason: This tweet is a promotional message from the speed test provider (@free), announcing the launch of a new server (nPerf 100 Gb/s) and encouraging users to try it out. It's an ad rather than a complaint, question, or feedback related to customer support.\",\n    \"A2\": \"JSON:\\n{\\\"categorie\\\": \\\"probleme\\\"}\\n\\nRaisonnement: Le tweet semble signaler un probl\\u00e8me ou une mise \\u00e0 jour importante concernant le serveur de test de vitesse pour les utilisateurs de la plateforme @free. La phrase finale \\u00ab Alors, \\u00e7a donne quoi vos tests ? \\u00bb sugg\\u00e8re \\u00e9galement que l'auteur recherche des informations ou des conseils sur la mani\\u00e8re d'obtenir un r\\u00e9sultat optimal avec le nouveau serveur.\",\n    \"A3\": \"The sentiment of the tweet is \\\"positive\\\" and more specifically, it expresses \\\"satisfaction\\\".\\n\\nHere's a JSON response:\\n\\n{\\\"sentiment\\\": \\\"satisfaction\\\"}\",\n    \"A4\": \"Bonjour !\\n\\nEn analysant le message, je d\\u00e9duis que le probl\\u00e8me type est \\\"abonnement\\\". En effet, le message parle de l'apparition d'un nouveau serveur pour les tests de d\\u00e9bit (nPerf) et mentionne sp\\u00e9cifiquement qu'il permettra aux utilisateurs de sym\\u00e9triser leurs tests pour des conditions optimales. Cela sugg\\u00e8re que le probl\\u00e8me est li\\u00e9 \\u00e0 la configuration ou au fonctionnement de l'abonnement du service Free.\\n\\nVoici une r\\u00e9ponse en JSON :\\n\\n```json\\n{\\\"type_probleme\\\": \\\"abonnement\\\"}\\n```\\n\\nEt voici un tweet r\\u00e9sumant les informations :\\n\\n\\\"D\\u00e9couvrez notre nouveau serveur nPerf 100 Gb/s ! Sym\\u00e9trisez vos tests pour des conditions optimales avec votre abonnement Free. En savoir plus : https://t.co/UE2OJDZ1tw #Nperf #Free #Speedtest\\\"\",\n    \"A5\": \"I cannot create a tweet or send it to you. However, I can help you with the gravity score. Would you like me to do that?\"\n}\n\nfor key in input_data.keys():\n    results = parse_json(input_data[key])\n\n    if not validate_results(results):\n        print(\"Key: \" + key)\n        print(\n            json.dumps(\n                validate_results(results),\n                indent=4,\n            )\n        )"
}