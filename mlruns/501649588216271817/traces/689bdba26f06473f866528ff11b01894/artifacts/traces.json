{"spans": [{"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "FnhMsKs16TI=", "trace_state": "", "parent_span_id": "", "name": "LangGraph", "start_time_unix_nano": 1763533641110901179, "end_time_unix_nano": 1763533646148783920, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "events": [{"time_unix_nano": 1763533646148714, "name": "exception", "attributes": {"exception.message": "", "exception.type": "KeyboardInterrupt", "exception.stacktrace": "Traceback (most recent call last):\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/pregel/main.py\", line 2674, in stream\n    for _ in runner.tick(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/pregel/_runner.py\", line 162, in tick\n    run_with_retry(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/pregel/_retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/_internal/_runnable.py\", line 657, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/_internal/_runnable.py\", line 401, in invoke\n    ret = self.func(*args, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/orchestrator.py\", line 59, in node_a6_checker\n    response = call_native_generate(OLLAMA_HOST, MODEL_NAME, prompt)\n  File \"/home/bader/Desktop/sav_b2/utils_runtime.py\", line 15, in call_native_generate\n    resp = requests.post(generate_url, json=generate_payload, timeout=60)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/api.py\", line 115, in post\n    return request(\"post\", url, data=data, json=json, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/api.py\", line 59, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/adapters.py\", line 644, in send\n    resp = conn.urlopen(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 534, in _make_request\n    response = conn.getresponse()\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connection.py\", line 565, in getresponse\n    httplib_response = super().getresponse()\n  File \"/usr/lib/python3.9/http/client.py\", line 1349, in getresponse\n    response.begin()\n  File \"/usr/lib/python3.9/http/client.py\", line 316, in begin\n    version, status, reason = self._read_status()\n  File \"/usr/lib/python3.9/http/client.py\", line 277, in _read_status\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n  File \"/usr/lib/python3.9/socket.py\", line 704, in readinto\n    return self._sock.recv_into(b)\nKeyboardInterrupt"}}], "status": {"message": "", "code": "STATUS_CODE_ERROR"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "0yX9ibYnvLY=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A1", "start_time_unix_nano": 1763533641112782620, "end_time_unix_nano": 1763533642865305123, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "metadata": "{\"langgraph_step\": 1, \"langgraph_node\": \"A1\", \"langgraph_triggers\": [\"branch:to:A1\"], \"langgraph_path\": [\"__pregel_pull\", \"A1\"], \"langgraph_checkpoint_ns\": \"A1:f79c0be9-c7a5-5dcd-defa-2f4ed53032fe\"}", "mlflow.spanOutputs": "{\"a1_result\": \"{\\\"useful\\\": false}\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "status": {"message": "", "code": "STATUS_CODE_OK"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "K7QyjzEb0uE=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A2", "start_time_unix_nano": 1763533641115104260, "end_time_unix_nano": 1763533642938205319, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "metadata": "{\"langgraph_step\": 1, \"langgraph_node\": \"A2\", \"langgraph_triggers\": [\"branch:to:A2\"], \"langgraph_path\": [\"__pregel_pull\", \"A2\"], \"langgraph_checkpoint_ns\": \"A2:b2b6c941-7e70-27b7-a9f1-a89d34d938f6\"}", "mlflow.spanOutputs": "{\"a2_result\": \"{\\\"categorie\\\": \\\"retour_client\\\"}\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "status": {"message": "", "code": "STATUS_CODE_OK"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "gF7EY/40pBE=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A3", "start_time_unix_nano": 1763533641117706977, "end_time_unix_nano": 1763533643512315330, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "metadata": "{\"langgraph_step\": 1, \"langgraph_node\": \"A3\", \"langgraph_triggers\": [\"branch:to:A3\"], \"langgraph_path\": [\"__pregel_pull\", \"A3\"], \"langgraph_checkpoint_ns\": \"A3:ba2b665c-2579-58ae-576d-e7ab6ae1620b\"}", "mlflow.spanOutputs": "{\"a3_result\": \"import json\\n\\ndef determine_sentiment(sentence):\\n    sentiment = {\\n        \\\"colere\\\": \\\"anger\\\",\\n        \\\"frustration\\\": \\\"negative emotion\\\",\\n        \\\"neutre\\\": \\\"neutral\\\",\\n        \\\"satisfaction\\\": \\\"positive emotion\\\"\\n    }\\n    return {\\\"sentiment\\\": sentiment.get(sentence, \\\"Unknown\\\")}\\n\\nsentence = \\\"colere\\\"\\n\\nresult = determine_sentiment(sentence)\\nprint(json.dumps(result))\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "status": {"message": "", "code": "STATUS_CODE_OK"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "G806W9Z7vqg=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A4", "start_time_unix_nano": 1763533641119965537, "end_time_unix_nano": 1763533642802787074, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "metadata": "{\"langgraph_step\": 1, \"langgraph_node\": \"A4\", \"langgraph_triggers\": [\"branch:to:A4\"], \"langgraph_path\": [\"__pregel_pull\", \"A4\"], \"langgraph_checkpoint_ns\": \"A4:36e60084-288a-cb30-93ce-f70aac852670\"}", "mlflow.spanOutputs": "{\"a4_result\": \"Bonjour !\\n\\nAnalysons le problème :\\n\\nLe message contient plusieurs termes différents : \\\"panne\\\", \\\"facturation\\\", \\\"abonnement\\\", \\\"resiliation\\\", \\\"information\\\" et \\\"autre\\\". Cependant, il semble que le message n'est pas lié à un problème spécifique de service, mais plutôt une notification de changement de chaîne télévisée.\\n\\nJe vais identifier le type de problème : **\\\"information\\\"**\\n\\nVoici la réponse JSON :\\n```json\\n{\\n  \\\"type_probleme\\\": \\\"information\\\"\\n}\\n```\\nEt voici le tweet avec l'ajout de l'identification du problème :\\nRT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\\n**Problème identifié : Information**\\n\\n(Note : en français, \\\"information\\\" est un terme couramment utilisé pour désigner une notification ou une mise à jour de renseignement.)\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "status": {"message": "", "code": "STATUS_CODE_OK"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "NzLjEPO9NlM=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A5", "start_time_unix_nano": 1763533641122822349, "end_time_unix_nano": 1763533644415885895, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\"}", "metadata": "{\"langgraph_step\": 1, \"langgraph_node\": \"A5\", \"langgraph_triggers\": [\"branch:to:A5\"], \"langgraph_path\": [\"__pregel_pull\", \"A5\"], \"langgraph_checkpoint_ns\": \"A5:5c3c731d-55e4-f3e1-b276-f798f2b73b2b\"}", "mlflow.spanOutputs": "{\"a5_result\": \"Bonjour !\\n\\nJe vais analyser le tweet pour déterminer le score de gravité.\\n\\nIl n'y a aucune information dans le tweet qui puisse indiquer une situation critique ou dangereuse, il s'agit donc d'un tweet de promotion d'une chaîne TV. Le score de gravité est donc :\\n\\n{\\\"score_gravite\\\": 0}\\n\\nTweet : \\\"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\\\"\\n\\nLa gravité est normale.\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "status": {"message": "", "code": "STATUS_CODE_OK"}}, {"trace_id": "myq01t15miCswJOugNRY/Q==", "span_id": "5YthmdBh+eQ=", "trace_state": "", "parent_span_id": "FnhMsKs16TI=", "name": "A6", "start_time_unix_nano": 1763533644417285026, "end_time_unix_nano": 1763533646147295297, "attributes": {"mlflow.spanType": "\"CHAIN\"", "mlflow.spanInputs": "{\"full_text\": \"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\", \"a1_result\": \"{\\\"useful\\\": false}\", \"a2_result\": \"{\\\"categorie\\\": \\\"retour_client\\\"}\", \"a3_result\": \"import json\\n\\ndef determine_sentiment(sentence):\\n    sentiment = {\\n        \\\"colere\\\": \\\"anger\\\",\\n        \\\"frustration\\\": \\\"negative emotion\\\",\\n        \\\"neutre\\\": \\\"neutral\\\",\\n        \\\"satisfaction\\\": \\\"positive emotion\\\"\\n    }\\n    return {\\\"sentiment\\\": sentiment.get(sentence, \\\"Unknown\\\")}\\n\\nsentence = \\\"colere\\\"\\n\\nresult = determine_sentiment(sentence)\\nprint(json.dumps(result))\", \"a4_result\": \"Bonjour !\\n\\nAnalysons le problème :\\n\\nLe message contient plusieurs termes différents : \\\"panne\\\", \\\"facturation\\\", \\\"abonnement\\\", \\\"resiliation\\\", \\\"information\\\" et \\\"autre\\\". Cependant, il semble que le message n'est pas lié à un problème spécifique de service, mais plutôt une notification de changement de chaîne télévisée.\\n\\nJe vais identifier le type de problème : **\\\"information\\\"**\\n\\nVoici la réponse JSON :\\n```json\\n{\\n  \\\"type_probleme\\\": \\\"information\\\"\\n}\\n```\\nEt voici le tweet avec l'ajout de l'identification du problème :\\nRT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\\n**Problème identifié : Information**\\n\\n(Note : en français, \\\"information\\\" est un terme couramment utilisé pour désigner une notification ou une mise à jour de renseignement.)\", \"a5_result\": \"Bonjour !\\n\\nJe vais analyser le tweet pour déterminer le score de gravité.\\n\\nIl n'y a aucune information dans le tweet qui puisse indiquer une situation critique ou dangereuse, il s'agit donc d'un tweet de promotion d'une chaîne TV. Le score de gravité est donc :\\n\\n{\\\"score_gravite\\\": 0}\\n\\nTweet : \\\"RT @free: Retrouvez désormais @ToonamiFR, la chaîne pour tous les fans de super-héros sur le canal 82 ! https://t.co/kuAYafYDiT\\\"\\n\\nLa gravité est normale.\"}", "metadata": "{\"langgraph_step\": 2, \"langgraph_node\": \"A6\", \"langgraph_triggers\": [\"branch:to:A6\"], \"langgraph_path\": [\"__pregel_pull\", \"A6\"], \"langgraph_checkpoint_ns\": \"A6:346062e6-e6cf-1989-2838-e19ff326ac04\"}", "mlflow.traceRequestId": "\"689bdba26f06473f866528ff11b01894\""}, "events": [{"time_unix_nano": 1763533646147149, "name": "exception", "attributes": {"exception.message": "", "exception.type": "KeyboardInterrupt", "exception.stacktrace": "Traceback (most recent call last):\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/_internal/_runnable.py\", line 657, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/langgraph/_internal/_runnable.py\", line 401, in invoke\n    ret = self.func(*args, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/orchestrator.py\", line 59, in node_a6_checker\n    response = call_native_generate(OLLAMA_HOST, MODEL_NAME, prompt)\n  File \"/home/bader/Desktop/sav_b2/utils_runtime.py\", line 15, in call_native_generate\n    resp = requests.post(generate_url, json=generate_payload, timeout=60)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/api.py\", line 115, in post\n    return request(\"post\", url, data=data, json=json, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/api.py\", line 59, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/requests/adapters.py\", line 644, in send\n    resp = conn.urlopen(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 534, in _make_request\n    response = conn.getresponse()\n  File \"/home/bader/Desktop/sav_b2/.venv/lib/python3.9/site-packages/urllib3/connection.py\", line 565, in getresponse\n    httplib_response = super().getresponse()\n  File \"/usr/lib/python3.9/http/client.py\", line 1349, in getresponse\n    response.begin()\n  File \"/usr/lib/python3.9/http/client.py\", line 316, in begin\n    version, status, reason = self._read_status()\n  File \"/usr/lib/python3.9/http/client.py\", line 277, in _read_status\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n  File \"/usr/lib/python3.9/socket.py\", line 704, in readinto\n    return self._sock.recv_into(b)\nKeyboardInterrupt"}}], "status": {"message": "", "code": "STATUS_CODE_ERROR"}}]}